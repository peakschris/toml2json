common --experimental_platform_in_output_dir
common --enable_platform_specific_config

# Point tools such as coursier (used in rules_jvm_external) to Bazel's downloaded JDK
# suggested in https://github.com/bazelbuild/rules_jvm_external/issues/445
common --repo_env=JAVA_HOME=../bazel_tools/jdk
common --action_env=JAVA_HOME=../bazel_tools/jdk

common --noincompatible_disallow_empty_glob
common --incompatible_enable_cc_toolchain_resolution
common --incompatible_strict_action_env

common:linux --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common:linux --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common:linux --host_action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common:macos --repo_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common:macos --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common:macos --host_action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1

common -c opt
common --@rules_rust//:extra_rustc_flags=-Clto=fat
common --@rules_rust//:extra_rustc_flags=-Cstrip=symbols
common --@rules_rust//:extra_rustc_flags=-Ccodegen-units=1
common --@rules_rust//:extra_rustc_flags=-Cpanic=abort


